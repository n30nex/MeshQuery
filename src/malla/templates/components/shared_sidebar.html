<!-- Shared Sidebar Component -->
<!-- This component provides common sidebar functionality for map and graph views -->

<!-- Sidebar -->
<div id="sidebar" class="sidebar">
    <div class="sidebar-header">
        <h5><i class="bi bi-{{ sidebar_icon | default('map') }}"></i> {{ sidebar_title | default('Network View') }}</h5>
        <button type="button" class="btn btn-sm btn-outline-secondary" id="toggleSidebar">
            <i class="bi bi-chevron-right"></i>
        </button>
    </div>

    <!-- Selected Item Details -->
    <div class="sidebar-section" id="selectedDetails" style="display: none;">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h6 class="mb-0"><i class="bi bi-info-circle"></i> Selected {{ selected_item_type | default('Item') }}</h6>
            <button type="button" class="btn btn-sm btn-outline-secondary" id="clearSelection" title="Clear selection">
                <i class="bi bi-x"></i>
            </button>
        </div>
        <div id="selectedDetailsContent" class="selected-details">
            <!-- Selected item details will appear here -->
        </div>
    </div>

    <!-- Hover Details (for graph view) -->
    {% if show_hover_details %}
    <div class="sidebar-section">
        <h6><i class="bi bi-eye"></i> Hover Details</h6>
        <div id="hoverDetails" class="hover-details">
            <small class="text-muted">Hover over nodes or links for details</small>
        </div>
    </div>
    {% endif %}

    <!-- Node Search and List Combined -->
    <div class="sidebar-section">
        <h6><i class="bi bi-search"></i> Search & Filter Nodes</h6>
        <div class="input-group input-group-sm mb-2">
            <input type="text" class="form-control" id="nodeSearch" placeholder="Search by node name or ID...">
            <button class="btn btn-outline-secondary" type="button" id="clearSearch">
                <i class="bi bi-x"></i>
            </button>
        </div>

        <!-- Combined search results and node list -->
        <div id="nodeListContainer" class="node-list-container">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <small class="text-muted">Nodes (<span id="nodeCount">0</span>)</small>
                <small class="text-muted" id="searchResultsCount" style="display: none;">
                    <span id="searchCount">0</span> results
                </small>
            </div>
            <div id="nodeList" class="node-list">
                <div class="text-center text-muted py-4">
                    <div class="spinner-border spinner-border-sm" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="mt-2 small">Loading nodes...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Controls Section -->
    <div class="sidebar-section">
        <h6><i class="bi bi-gear"></i> Controls</h6>
        <div class="d-grid gap-2" id="controlButtons">
            <!-- Control buttons will be added by the specific page -->
        </div>
    </div>

    <!-- Filters Section -->
    {% if show_filters %}
    <div class="sidebar-section">
        <h6><i class="bi bi-funnel"></i> Filters</h6>
        <div id="filtersContainer">
            <!-- Filters will be added by the specific page -->
        </div>
    </div>
    {% endif %}

    <!-- Statistics Section -->
    <div class="sidebar-section">
        <h6><i class="bi bi-bar-chart"></i> Statistics</h6>
        <div id="statsContainer" class="stats-content">
            <small class="text-muted">Loading...</small>
        </div>
    </div>

    <!-- Legend Section -->
    <div class="sidebar-section">
        <h6><i class="bi bi-palette"></i> Legend</h6>
        <div class="legend-content" id="legendContainer">
            <!-- Legend content will be added by the specific page -->
        </div>
    </div>
</div>
